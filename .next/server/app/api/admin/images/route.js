"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/admin/images/route";
exports.ids = ["app/api/admin/images/route"];
exports.modules = {

/***/ "@aws-sdk/client-s3":
/*!*************************************!*\
  !*** external "@aws-sdk/client-s3" ***!
  \*************************************/
/***/ ((module) => {

module.exports = require("@aws-sdk/client-s3");

/***/ }),

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fadmin%2Fimages%2Froute&page=%2Fapi%2Fadmin%2Fimages%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fadmin%2Fimages%2Froute.ts&appDir=%2Fworkspaces%2Fmb01%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fworkspaces%2Fmb01&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!**************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fadmin%2Fimages%2Froute&page=%2Fapi%2Fadmin%2Fimages%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fadmin%2Fimages%2Froute.ts&appDir=%2Fworkspaces%2Fmb01%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fworkspaces%2Fmb01&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \**************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _workspaces_mb01_app_api_admin_images_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./app/api/admin/images/route.ts */ \"(rsc)/./app/api/admin/images/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/admin/images/route\",\n        pathname: \"/api/admin/images\",\n        filename: \"route\",\n        bundlePath: \"app/api/admin/images/route\"\n    },\n    resolvedPagePath: \"/workspaces/mb01/app/api/admin/images/route.ts\",\n    nextConfigOutput,\n    userland: _workspaces_mb01_app_api_admin_images_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\nconst originalPathname = \"/api/admin/images/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZhZG1pbiUyRmltYWdlcyUyRnJvdXRlJnBhZ2U9JTJGYXBpJTJGYWRtaW4lMkZpbWFnZXMlMkZyb3V0ZSZhcHBQYXRocz0mcGFnZVBhdGg9cHJpdmF0ZS1uZXh0LWFwcC1kaXIlMkZhcGklMkZhZG1pbiUyRmltYWdlcyUyRnJvdXRlLnRzJmFwcERpcj0lMkZ3b3Jrc3BhY2VzJTJGbWIwMSUyRmFwcCZwYWdlRXh0ZW5zaW9ucz10c3gmcGFnZUV4dGVuc2lvbnM9dHMmcGFnZUV4dGVuc2lvbnM9anN4JnBhZ2VFeHRlbnNpb25zPWpzJnJvb3REaXI9JTJGd29ya3NwYWNlcyUyRm1iMDEmaXNEZXY9dHJ1ZSZ0c2NvbmZpZ1BhdGg9dHNjb25maWcuanNvbiZiYXNlUGF0aD0mYXNzZXRQcmVmaXg9Jm5leHRDb25maWdPdXRwdXQ9JnByZWZlcnJlZFJlZ2lvbj0mbWlkZGxld2FyZUNvbmZpZz1lMzAlM0QhIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7OztBQUFzRztBQUN2QztBQUNjO0FBQ0Y7QUFDM0U7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLGdIQUFtQjtBQUMzQztBQUNBLGNBQWMseUVBQVM7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLFlBQVk7QUFDWixDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0EsUUFBUSxpRUFBaUU7QUFDekU7QUFDQTtBQUNBLFdBQVcsNEVBQVc7QUFDdEI7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUN1SDs7QUFFdkgiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9tYjAxLz85MzFlIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEFwcFJvdXRlUm91dGVNb2R1bGUgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUtbW9kdWxlcy9hcHAtcm91dGUvbW9kdWxlLmNvbXBpbGVkXCI7XG5pbXBvcnQgeyBSb3V0ZUtpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUta2luZFwiO1xuaW1wb3J0IHsgcGF0Y2hGZXRjaCBhcyBfcGF0Y2hGZXRjaCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2xpYi9wYXRjaC1mZXRjaFwiO1xuaW1wb3J0ICogYXMgdXNlcmxhbmQgZnJvbSBcIi93b3Jrc3BhY2VzL21iMDEvYXBwL2FwaS9hZG1pbi9pbWFnZXMvcm91dGUudHNcIjtcbi8vIFdlIGluamVjdCB0aGUgbmV4dENvbmZpZ091dHB1dCBoZXJlIHNvIHRoYXQgd2UgY2FuIHVzZSB0aGVtIGluIHRoZSByb3V0ZVxuLy8gbW9kdWxlLlxuY29uc3QgbmV4dENvbmZpZ091dHB1dCA9IFwiXCJcbmNvbnN0IHJvdXRlTW9kdWxlID0gbmV3IEFwcFJvdXRlUm91dGVNb2R1bGUoe1xuICAgIGRlZmluaXRpb246IHtcbiAgICAgICAga2luZDogUm91dGVLaW5kLkFQUF9ST1VURSxcbiAgICAgICAgcGFnZTogXCIvYXBpL2FkbWluL2ltYWdlcy9yb3V0ZVwiLFxuICAgICAgICBwYXRobmFtZTogXCIvYXBpL2FkbWluL2ltYWdlc1wiLFxuICAgICAgICBmaWxlbmFtZTogXCJyb3V0ZVwiLFxuICAgICAgICBidW5kbGVQYXRoOiBcImFwcC9hcGkvYWRtaW4vaW1hZ2VzL3JvdXRlXCJcbiAgICB9LFxuICAgIHJlc29sdmVkUGFnZVBhdGg6IFwiL3dvcmtzcGFjZXMvbWIwMS9hcHAvYXBpL2FkbWluL2ltYWdlcy9yb3V0ZS50c1wiLFxuICAgIG5leHRDb25maWdPdXRwdXQsXG4gICAgdXNlcmxhbmRcbn0pO1xuLy8gUHVsbCBvdXQgdGhlIGV4cG9ydHMgdGhhdCB3ZSBuZWVkIHRvIGV4cG9zZSBmcm9tIHRoZSBtb2R1bGUuIFRoaXMgc2hvdWxkXG4vLyBiZSBlbGltaW5hdGVkIHdoZW4gd2UndmUgbW92ZWQgdGhlIG90aGVyIHJvdXRlcyB0byB0aGUgbmV3IGZvcm1hdC4gVGhlc2Vcbi8vIGFyZSB1c2VkIHRvIGhvb2sgaW50byB0aGUgcm91dGUuXG5jb25zdCB7IHJlcXVlc3RBc3luY1N0b3JhZ2UsIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzIH0gPSByb3V0ZU1vZHVsZTtcbmNvbnN0IG9yaWdpbmFsUGF0aG5hbWUgPSBcIi9hcGkvYWRtaW4vaW1hZ2VzL3JvdXRlXCI7XG5mdW5jdGlvbiBwYXRjaEZldGNoKCkge1xuICAgIHJldHVybiBfcGF0Y2hGZXRjaCh7XG4gICAgICAgIHNlcnZlckhvb2tzLFxuICAgICAgICBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlXG4gICAgfSk7XG59XG5leHBvcnQgeyByb3V0ZU1vZHVsZSwgcmVxdWVzdEFzeW5jU3RvcmFnZSwgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MsIG9yaWdpbmFsUGF0aG5hbWUsIHBhdGNoRmV0Y2gsICB9O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1hcHAtcm91dGUuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fadmin%2Fimages%2Froute&page=%2Fapi%2Fadmin%2Fimages%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fadmin%2Fimages%2Froute.ts&appDir=%2Fworkspaces%2Fmb01%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fworkspaces%2Fmb01&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./app/api/admin/images/route.ts":
/*!***************************************!*\
  !*** ./app/api/admin/images/route.ts ***!
  \***************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GET: () => (/* binding */ GET),\n/* harmony export */   dynamic: () => (/* binding */ dynamic)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var _lib_r2__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/r2 */ \"(rsc)/./lib/r2.ts\");\n// app/api/admin/images/route.ts\n\n\nconst dynamic = \"force-dynamic\";\nasync function GET() {\n    try {\n        // 從 R2 列出圖片（預設 prefix = \"uploads/\"，maxKeys = 200）\n        const files = await (0,_lib_r2__WEBPACK_IMPORTED_MODULE_1__.listR2Images)({\n            prefix: \"uploads/\",\n            maxKeys: 200\n        });\n        // 轉成前端 ImageAssetItem 需要的格式\n        const images = files.map((file)=>{\n            const filename = file.key.split(\"/\").pop() ?? file.key;\n            return {\n                id: file.key,\n                url: file.url,\n                label: filename\n            };\n        });\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            images\n        });\n    } catch (err) {\n        console.error(\"[R2] list images error:\", err);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: \"Failed to list images from R2\"\n        }, {\n            status: 500\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9hcHAvYXBpL2FkbWluL2ltYWdlcy9yb3V0ZS50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQUEsZ0NBQWdDO0FBQ1c7QUFDSDtBQUVqQyxNQUFNRSxVQUFVLGdCQUFnQjtBQUVoQyxlQUFlQztJQUNwQixJQUFJO1FBQ0Ysa0RBQWtEO1FBQ2xELE1BQU1DLFFBQVEsTUFBTUgscURBQVlBLENBQUM7WUFDL0JJLFFBQVE7WUFDUkMsU0FBUztRQUNYO1FBRUEsNEJBQTRCO1FBQzVCLE1BQU1DLFNBQVNILE1BQU1JLEdBQUcsQ0FBQyxDQUFDQztZQUN4QixNQUFNQyxXQUFXRCxLQUFLRSxHQUFHLENBQUNDLEtBQUssQ0FBQyxLQUFLQyxHQUFHLE1BQU1KLEtBQUtFLEdBQUc7WUFDdEQsT0FBTztnQkFDTEcsSUFBSUwsS0FBS0UsR0FBRztnQkFDWkksS0FBS04sS0FBS00sR0FBRztnQkFDYkMsT0FBT047WUFDVDtRQUNGO1FBRUEsT0FBT1YscURBQVlBLENBQUNpQixJQUFJLENBQUM7WUFBRVY7UUFBTztJQUNwQyxFQUFFLE9BQU9XLEtBQUs7UUFDWkMsUUFBUUMsS0FBSyxDQUFDLDJCQUEyQkY7UUFDekMsT0FBT2xCLHFEQUFZQSxDQUFDaUIsSUFBSSxDQUN0QjtZQUFFRyxPQUFPO1FBQWdDLEdBQ3pDO1lBQUVDLFFBQVE7UUFBSTtJQUVsQjtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbWIwMS8uL2FwcC9hcGkvYWRtaW4vaW1hZ2VzL3JvdXRlLnRzPzQ3M2MiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gYXBwL2FwaS9hZG1pbi9pbWFnZXMvcm91dGUudHNcbmltcG9ydCB7IE5leHRSZXNwb25zZSB9IGZyb20gXCJuZXh0L3NlcnZlclwiO1xuaW1wb3J0IHsgbGlzdFIySW1hZ2VzIH0gZnJvbSBcIkAvbGliL3IyXCI7XG5cbmV4cG9ydCBjb25zdCBkeW5hbWljID0gXCJmb3JjZS1keW5hbWljXCI7XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBHRVQoKSB7XG4gIHRyeSB7XG4gICAgLy8g5b6eIFIyIOWIl+WHuuWclueJh++8iOmgkOiorSBwcmVmaXggPSBcInVwbG9hZHMvXCLvvIxtYXhLZXlzID0gMjAw77yJXG4gICAgY29uc3QgZmlsZXMgPSBhd2FpdCBsaXN0UjJJbWFnZXMoe1xuICAgICAgcHJlZml4OiBcInVwbG9hZHMvXCIsXG4gICAgICBtYXhLZXlzOiAyMDAsXG4gICAgfSk7XG5cbiAgICAvLyDovYnmiJDliY3nq68gSW1hZ2VBc3NldEl0ZW0g6ZyA6KaB55qE5qC85byPXG4gICAgY29uc3QgaW1hZ2VzID0gZmlsZXMubWFwKChmaWxlKSA9PiB7XG4gICAgICBjb25zdCBmaWxlbmFtZSA9IGZpbGUua2V5LnNwbGl0KFwiL1wiKS5wb3AoKSA/PyBmaWxlLmtleTtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIGlkOiBmaWxlLmtleSwgICAgICAgIC8vIOeUqCBrZXkg55W2IGlkIOWwseWlvVxuICAgICAgICB1cmw6IGZpbGUudXJsLCAgICAgICAvLyBSMl9QVUJMSUNfQkFTRV9VUkwgKyBrZXlcbiAgICAgICAgbGFiZWw6IGZpbGVuYW1lLCAgICAgLy8g5ZyW54mH5ZCN56ix55W2IGxhYmVsXG4gICAgICB9O1xuICAgIH0pO1xuXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgaW1hZ2VzIH0pO1xuICB9IGNhdGNoIChlcnIpIHtcbiAgICBjb25zb2xlLmVycm9yKFwiW1IyXSBsaXN0IGltYWdlcyBlcnJvcjpcIiwgZXJyKTtcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXG4gICAgICB7IGVycm9yOiBcIkZhaWxlZCB0byBsaXN0IGltYWdlcyBmcm9tIFIyXCIgfSxcbiAgICAgIHsgc3RhdHVzOiA1MDAgfSxcbiAgICApO1xuICB9XG59XG4iXSwibmFtZXMiOlsiTmV4dFJlc3BvbnNlIiwibGlzdFIySW1hZ2VzIiwiZHluYW1pYyIsIkdFVCIsImZpbGVzIiwicHJlZml4IiwibWF4S2V5cyIsImltYWdlcyIsIm1hcCIsImZpbGUiLCJmaWxlbmFtZSIsImtleSIsInNwbGl0IiwicG9wIiwiaWQiLCJ1cmwiLCJsYWJlbCIsImpzb24iLCJlcnIiLCJjb25zb2xlIiwiZXJyb3IiLCJzdGF0dXMiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./app/api/admin/images/route.ts\n");

/***/ }),

/***/ "(rsc)/./lib/r2.ts":
/*!*******************!*\
  !*** ./lib/r2.ts ***!
  \*******************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   R2_PUBLIC_BASE_URL: () => (/* binding */ R2_PUBLIC_BASE_URL),\n/* harmony export */   listR2Images: () => (/* binding */ listR2Images),\n/* harmony export */   r2Client: () => (/* binding */ r2Client),\n/* harmony export */   uploadToR2: () => (/* binding */ uploadToR2)\n/* harmony export */ });\n/* harmony import */ var _aws_sdk_client_s3__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @aws-sdk/client-s3 */ \"@aws-sdk/client-s3\");\n/* harmony import */ var _aws_sdk_client_s3__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_aws_sdk_client_s3__WEBPACK_IMPORTED_MODULE_0__);\n// lib/r2.ts\n\nconst accountId = process.env.R2_ACCOUNT_ID ?? \"\"; // 例如 c69e3d1a7fc9...\nconst accessKeyId = process.env.R2_ACCESS_KEY_ID ?? \"\";\nconst secretAccessKey = process.env.R2_SECRET_ACCESS_KEY ?? \"\";\nconst bucketName = process.env.R2_BUCKET_NAME ?? \"\";\nconst publicBaseUrl = process.env.R2_PUBLIC_BASE_URL ?? \"\"; // 例如 https://img.mbpack.co\n// 允許你在 .env 裡直接指定完整 endpoint；如果沒給，就用 accountId 組出預設的\nconst envEndpoint = process.env.R2_ENDPOINT;\nconst endpoint = envEndpoint && envEndpoint.trim().length > 0 ? envEndpoint.trim() : accountId ? `https://${accountId}.r2.cloudflarestorage.com` : \"\";\nif (!accountId || !accessKeyId || !secretAccessKey || !bucketName || !publicBaseUrl) {\n    console.warn(\"[R2] Missing R2 env vars, please check .env\");\n}\nif (!endpoint) {\n    console.warn(\"[R2] Missing endpoint. Set R2_ACCOUNT_ID or R2_ENDPOINT.\");\n}\nconsole.log(\"[R2] Using endpoint:\", endpoint);\nconst r2Client = new _aws_sdk_client_s3__WEBPACK_IMPORTED_MODULE_0__.S3Client({\n    region: \"auto\",\n    endpoint,\n    credentials: {\n        accessKeyId,\n        secretAccessKey\n    }\n});\n// ✅ 上傳到 R2，回傳對外公開 URL\nasync function uploadToR2(key, body, contentType) {\n    const command = new _aws_sdk_client_s3__WEBPACK_IMPORTED_MODULE_0__.PutObjectCommand({\n        Bucket: bucketName,\n        Key: key,\n        Body: body,\n        ContentType: contentType\n    });\n    await r2Client.send(command);\n    const url = `${publicBaseUrl}/${key}`;\n    return url;\n}\n// ✅ 列出 R2 圖片（給 /api/admin/images 或其他 API 用）\nasync function listR2Images(options) {\n    const prefix = options?.prefix ?? \"uploads/\";\n    const maxKeys = options?.maxKeys ?? 200;\n    const command = new _aws_sdk_client_s3__WEBPACK_IMPORTED_MODULE_0__.ListObjectsV2Command({\n        Bucket: bucketName,\n        Prefix: prefix,\n        MaxKeys: maxKeys\n    });\n    const res = await r2Client.send(command);\n    const items = res.Contents?.filter((obj)=>!!obj.Key).map((obj)=>{\n        const key = obj.Key;\n        const url = `${publicBaseUrl}/${key}`;\n        return {\n            key,\n            url,\n            size: Number(obj.Size ?? 0),\n            lastModified: obj.LastModified ?? null\n        };\n    }) ?? [];\n    return items;\n}\nconst R2_PUBLIC_BASE_URL = publicBaseUrl;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvcjIudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0FBQUEsWUFBWTtBQUtnQjtBQUU1QixNQUFNRyxZQUFZQyxRQUFRQyxHQUFHLENBQUNDLGFBQWEsSUFBSSxJQUFjLHFCQUFxQjtBQUNsRixNQUFNQyxjQUFjSCxRQUFRQyxHQUFHLENBQUNHLGdCQUFnQixJQUFJO0FBQ3BELE1BQU1DLGtCQUFrQkwsUUFBUUMsR0FBRyxDQUFDSyxvQkFBb0IsSUFBSTtBQUM1RCxNQUFNQyxhQUFhUCxRQUFRQyxHQUFHLENBQUNPLGNBQWMsSUFBSTtBQUNqRCxNQUFNQyxnQkFBZ0JULFFBQVFDLEdBQUcsQ0FBQ1Msa0JBQWtCLElBQUksSUFBSywyQkFBMkI7QUFFeEYscURBQXFEO0FBQ3JELE1BQU1DLGNBQWNYLFFBQVFDLEdBQUcsQ0FBQ1csV0FBVztBQUMzQyxNQUFNQyxXQUNKRixlQUFlQSxZQUFZRyxJQUFJLEdBQUdDLE1BQU0sR0FBRyxJQUN2Q0osWUFBWUcsSUFBSSxLQUNoQmYsWUFDQSxDQUFDLFFBQVEsRUFBRUEsVUFBVSx5QkFBeUIsQ0FBQyxHQUMvQztBQUVOLElBQUksQ0FBQ0EsYUFBYSxDQUFDSSxlQUFlLENBQUNFLG1CQUFtQixDQUFDRSxjQUFjLENBQUNFLGVBQWU7SUFDbkZPLFFBQVFDLElBQUksQ0FBQztBQUNmO0FBQ0EsSUFBSSxDQUFDSixVQUFVO0lBQ2JHLFFBQVFDLElBQUksQ0FBQztBQUNmO0FBRUFELFFBQVFFLEdBQUcsQ0FBQyx3QkFBd0JMO0FBRTdCLE1BQU1NLFdBQVcsSUFBSXZCLHdEQUFRQSxDQUFDO0lBQ25Dd0IsUUFBUTtJQUNSUDtJQUNBUSxhQUFhO1FBQ1hsQjtRQUNBRTtJQUNGO0FBQ0YsR0FBRztBQVVILHNCQUFzQjtBQUNmLGVBQWVpQixXQUNwQkMsR0FBVyxFQUNYQyxJQUFZLEVBQ1pDLFdBQW1CO0lBRW5CLE1BQU1DLFVBQVUsSUFBSTdCLGdFQUFnQkEsQ0FBQztRQUNuQzhCLFFBQVFwQjtRQUNScUIsS0FBS0w7UUFDTE0sTUFBTUw7UUFDTk0sYUFBYUw7SUFDZjtJQUVBLE1BQU1OLFNBQVNZLElBQUksQ0FBQ0w7SUFFcEIsTUFBTU0sTUFBTSxDQUFDLEVBQUV2QixjQUFjLENBQUMsRUFBRWMsSUFBSSxDQUFDO0lBQ3JDLE9BQU9TO0FBQ1Q7QUFFQSw0Q0FBNEM7QUFDckMsZUFBZUMsYUFBYUMsT0FHbEM7SUFDQyxNQUFNQyxTQUFTRCxTQUFTQyxVQUFVO0lBQ2xDLE1BQU1DLFVBQVVGLFNBQVNFLFdBQVc7SUFFcEMsTUFBTVYsVUFBVSxJQUFJNUIsb0VBQW9CQSxDQUFDO1FBQ3ZDNkIsUUFBUXBCO1FBQ1I4QixRQUFRRjtRQUNSRyxTQUFTRjtJQUNYO0lBRUEsTUFBTUcsTUFBTSxNQUFNcEIsU0FBU1ksSUFBSSxDQUFDTDtJQUVoQyxNQUFNYyxRQUNKRCxJQUFJRSxRQUFRLEVBQUVDLE9BQU8sQ0FBQ0MsTUFBUSxDQUFDLENBQUNBLElBQUlmLEdBQUcsRUFBRWdCLElBQUksQ0FBQ0Q7UUFDNUMsTUFBTXBCLE1BQU1vQixJQUFJZixHQUFHO1FBQ25CLE1BQU1JLE1BQU0sQ0FBQyxFQUFFdkIsY0FBYyxDQUFDLEVBQUVjLElBQUksQ0FBQztRQUNyQyxPQUFPO1lBQ0xBO1lBQ0FTO1lBQ0FhLE1BQU1DLE9BQU9ILElBQUlJLElBQUksSUFBSTtZQUN6QkMsY0FBYyxJQUFLQyxZQUFZLElBQWE7UUFDOUM7SUFDRixNQUFNLEVBQUU7SUFFVixPQUFPVDtBQUNUO0FBRU8sTUFBTTlCLHFCQUFxQkQsY0FBYyIsInNvdXJjZXMiOlsid2VicGFjazovL21iMDEvLi9saWIvcjIudHM/ODljMiJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBsaWIvcjIudHNcbmltcG9ydCB7XG4gIFMzQ2xpZW50LFxuICBQdXRPYmplY3RDb21tYW5kLFxuICBMaXN0T2JqZWN0c1YyQ29tbWFuZCxcbn0gZnJvbSBcIkBhd3Mtc2RrL2NsaWVudC1zM1wiO1xuXG5jb25zdCBhY2NvdW50SWQgPSBwcm9jZXNzLmVudi5SMl9BQ0NPVU5UX0lEID8/IFwiXCI7ICAgICAgICAgICAvLyDkvovlpoIgYzY5ZTNkMWE3ZmM5Li4uXG5jb25zdCBhY2Nlc3NLZXlJZCA9IHByb2Nlc3MuZW52LlIyX0FDQ0VTU19LRVlfSUQgPz8gXCJcIjtcbmNvbnN0IHNlY3JldEFjY2Vzc0tleSA9IHByb2Nlc3MuZW52LlIyX1NFQ1JFVF9BQ0NFU1NfS0VZID8/IFwiXCI7XG5jb25zdCBidWNrZXROYW1lID0gcHJvY2Vzcy5lbnYuUjJfQlVDS0VUX05BTUUgPz8gXCJcIjtcbmNvbnN0IHB1YmxpY0Jhc2VVcmwgPSBwcm9jZXNzLmVudi5SMl9QVUJMSUNfQkFTRV9VUkwgPz8gXCJcIjsgIC8vIOS+i+WmgiBodHRwczovL2ltZy5tYnBhY2suY29cblxuLy8g5YWB6Kix5L2g5ZyoIC5lbnYg6KOh55u05o6l5oyH5a6a5a6M5pW0IGVuZHBvaW5077yb5aaC5p6c5rKS57Wm77yM5bCx55SoIGFjY291bnRJZCDntYTlh7rpoJDoqK3nmoRcbmNvbnN0IGVudkVuZHBvaW50ID0gcHJvY2Vzcy5lbnYuUjJfRU5EUE9JTlQ7XG5jb25zdCBlbmRwb2ludCA9XG4gIGVudkVuZHBvaW50ICYmIGVudkVuZHBvaW50LnRyaW0oKS5sZW5ndGggPiAwXG4gICAgPyBlbnZFbmRwb2ludC50cmltKClcbiAgICA6IGFjY291bnRJZFxuICAgID8gYGh0dHBzOi8vJHthY2NvdW50SWR9LnIyLmNsb3VkZmxhcmVzdG9yYWdlLmNvbWBcbiAgICA6IFwiXCI7XG5cbmlmICghYWNjb3VudElkIHx8ICFhY2Nlc3NLZXlJZCB8fCAhc2VjcmV0QWNjZXNzS2V5IHx8ICFidWNrZXROYW1lIHx8ICFwdWJsaWNCYXNlVXJsKSB7XG4gIGNvbnNvbGUud2FybihcIltSMl0gTWlzc2luZyBSMiBlbnYgdmFycywgcGxlYXNlIGNoZWNrIC5lbnZcIik7XG59XG5pZiAoIWVuZHBvaW50KSB7XG4gIGNvbnNvbGUud2FybihcIltSMl0gTWlzc2luZyBlbmRwb2ludC4gU2V0IFIyX0FDQ09VTlRfSUQgb3IgUjJfRU5EUE9JTlQuXCIpO1xufVxuXG5jb25zb2xlLmxvZyhcIltSMl0gVXNpbmcgZW5kcG9pbnQ6XCIsIGVuZHBvaW50KTtcblxuZXhwb3J0IGNvbnN0IHIyQ2xpZW50ID0gbmV3IFMzQ2xpZW50KHtcbiAgcmVnaW9uOiBcImF1dG9cIixcbiAgZW5kcG9pbnQsXG4gIGNyZWRlbnRpYWxzOiB7XG4gICAgYWNjZXNzS2V5SWQsXG4gICAgc2VjcmV0QWNjZXNzS2V5LFxuICB9LFxufSk7XG5cbi8vIOWclueJhyBpdGVtIOeahOWFseeUqOWei+WIpe+8iExpYnJhcnkgLyBBUEkg5YWx55So77yJXG5leHBvcnQgdHlwZSBSMkltYWdlSXRlbSA9IHtcbiAga2V5OiBzdHJpbmc7XG4gIHVybDogc3RyaW5nO1xuICBzaXplOiBudW1iZXI7XG4gIGxhc3RNb2RpZmllZDogRGF0ZSB8IG51bGw7XG59O1xuXG4vLyDinIUg5LiK5YKz5YiwIFIy77yM5Zue5YKz5bCN5aSW5YWs6ZaLIFVSTFxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHVwbG9hZFRvUjIoXG4gIGtleTogc3RyaW5nLFxuICBib2R5OiBCdWZmZXIsXG4gIGNvbnRlbnRUeXBlOiBzdHJpbmcsXG4pOiBQcm9taXNlPHN0cmluZz4ge1xuICBjb25zdCBjb21tYW5kID0gbmV3IFB1dE9iamVjdENvbW1hbmQoe1xuICAgIEJ1Y2tldDogYnVja2V0TmFtZSxcbiAgICBLZXk6IGtleSxcbiAgICBCb2R5OiBib2R5LFxuICAgIENvbnRlbnRUeXBlOiBjb250ZW50VHlwZSxcbiAgfSk7XG5cbiAgYXdhaXQgcjJDbGllbnQuc2VuZChjb21tYW5kKTtcblxuICBjb25zdCB1cmwgPSBgJHtwdWJsaWNCYXNlVXJsfS8ke2tleX1gO1xuICByZXR1cm4gdXJsO1xufVxuXG4vLyDinIUg5YiX5Ye6IFIyIOWclueJh++8iOe1piAvYXBpL2FkbWluL2ltYWdlcyDmiJblhbbku5YgQVBJIOeUqO+8iVxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGxpc3RSMkltYWdlcyhvcHRpb25zPzoge1xuICBwcmVmaXg/OiBzdHJpbmc7XG4gIG1heEtleXM/OiBudW1iZXI7XG59KTogUHJvbWlzZTxSMkltYWdlSXRlbVtdPiB7XG4gIGNvbnN0IHByZWZpeCA9IG9wdGlvbnM/LnByZWZpeCA/PyBcInVwbG9hZHMvXCI7XG4gIGNvbnN0IG1heEtleXMgPSBvcHRpb25zPy5tYXhLZXlzID8/IDIwMDtcblxuICBjb25zdCBjb21tYW5kID0gbmV3IExpc3RPYmplY3RzVjJDb21tYW5kKHtcbiAgICBCdWNrZXQ6IGJ1Y2tldE5hbWUsXG4gICAgUHJlZml4OiBwcmVmaXgsXG4gICAgTWF4S2V5czogbWF4S2V5cyxcbiAgfSk7XG5cbiAgY29uc3QgcmVzID0gYXdhaXQgcjJDbGllbnQuc2VuZChjb21tYW5kKTtcblxuICBjb25zdCBpdGVtczogUjJJbWFnZUl0ZW1bXSA9XG4gICAgcmVzLkNvbnRlbnRzPy5maWx0ZXIoKG9iaikgPT4gISFvYmouS2V5KS5tYXAoKG9iaikgPT4ge1xuICAgICAgY29uc3Qga2V5ID0gb2JqLktleSE7XG4gICAgICBjb25zdCB1cmwgPSBgJHtwdWJsaWNCYXNlVXJsfS8ke2tleX1gO1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAga2V5LFxuICAgICAgICB1cmwsXG4gICAgICAgIHNpemU6IE51bWJlcihvYmouU2l6ZSA/PyAwKSxcbiAgICAgICAgbGFzdE1vZGlmaWVkOiAob2JqLkxhc3RNb2RpZmllZCBhcyBEYXRlKSA/PyBudWxsLFxuICAgICAgfTtcbiAgICB9KSA/PyBbXTtcblxuICByZXR1cm4gaXRlbXM7XG59XG5cbmV4cG9ydCBjb25zdCBSMl9QVUJMSUNfQkFTRV9VUkwgPSBwdWJsaWNCYXNlVXJsO1xuIl0sIm5hbWVzIjpbIlMzQ2xpZW50IiwiUHV0T2JqZWN0Q29tbWFuZCIsIkxpc3RPYmplY3RzVjJDb21tYW5kIiwiYWNjb3VudElkIiwicHJvY2VzcyIsImVudiIsIlIyX0FDQ09VTlRfSUQiLCJhY2Nlc3NLZXlJZCIsIlIyX0FDQ0VTU19LRVlfSUQiLCJzZWNyZXRBY2Nlc3NLZXkiLCJSMl9TRUNSRVRfQUNDRVNTX0tFWSIsImJ1Y2tldE5hbWUiLCJSMl9CVUNLRVRfTkFNRSIsInB1YmxpY0Jhc2VVcmwiLCJSMl9QVUJMSUNfQkFTRV9VUkwiLCJlbnZFbmRwb2ludCIsIlIyX0VORFBPSU5UIiwiZW5kcG9pbnQiLCJ0cmltIiwibGVuZ3RoIiwiY29uc29sZSIsIndhcm4iLCJsb2ciLCJyMkNsaWVudCIsInJlZ2lvbiIsImNyZWRlbnRpYWxzIiwidXBsb2FkVG9SMiIsImtleSIsImJvZHkiLCJjb250ZW50VHlwZSIsImNvbW1hbmQiLCJCdWNrZXQiLCJLZXkiLCJCb2R5IiwiQ29udGVudFR5cGUiLCJzZW5kIiwidXJsIiwibGlzdFIySW1hZ2VzIiwib3B0aW9ucyIsInByZWZpeCIsIm1heEtleXMiLCJQcmVmaXgiLCJNYXhLZXlzIiwicmVzIiwiaXRlbXMiLCJDb250ZW50cyIsImZpbHRlciIsIm9iaiIsIm1hcCIsInNpemUiLCJOdW1iZXIiLCJTaXplIiwibGFzdE1vZGlmaWVkIiwiTGFzdE1vZGlmaWVkIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./lib/r2.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fadmin%2Fimages%2Froute&page=%2Fapi%2Fadmin%2Fimages%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fadmin%2Fimages%2Froute.ts&appDir=%2Fworkspaces%2Fmb01%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fworkspaces%2Fmb01&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();